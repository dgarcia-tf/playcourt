<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>C.N. Playa San Marcos · Panel web</title>
    <link rel="icon" type="image/png" href="/app/assets/club-logo.png" />
    <link rel="stylesheet" href="/app/styles.css" />
  </head>
  <body data-app-base-path="/app">
    <main class="layout">
      <section id="auth-view" class="auth-view">
        <div class="auth-card">
          <div class="auth-header">
            <h1>C.N. Playa San Marcos</h1>
            <p id="auth-description">
              Inicia sesión o crea la cuenta inicial de administrador para empezar a gestionar la liga.
            </p>
          </div>

          <div class="tabs" role="tablist">
            <button class="tab-button active" type="button" data-target="login" role="tab" aria-selected="true">
              Iniciar sesión
            </button>
            <button class="tab-button" type="button" data-target="register" role="tab" aria-selected="false">
              Registrarse
            </button>
          </div>

          <div class="tab-pane" data-pane="login">
            <form id="login-form" class="form">
              <label>
                Correo electrónico
                <input type="email" name="email" autocomplete="email" required />
              </label>
              <label>
                Contraseña
                <input type="password" name="password" autocomplete="current-password" required />
              </label>
              <label class="checkbox-option remember-option">
                <input type="checkbox" id="login-remember" name="remember" />
                Recordar mis datos de acceso
              </label>
              <button type="submit" class="primary">Entrar</button>
              <p class="status-message" id="login-status"></p>
            </form>
          </div>

          <div class="tab-pane" data-pane="register" hidden>
            <form id="register-form" class="form">
              <label>
                Nombre completo
                <input type="text" name="fullName" autocomplete="name" required />
              </label>
              <label>
                Correo electrónico
                <input type="email" name="email" autocomplete="email" required />
              </label>
              <label>
                Contraseña
                <input type="password" name="password" autocomplete="new-password" minlength="8" required />
              </label>
              <div class="form-grid">
                <label>
                  Género
                  <select name="gender" required>
                    <option value="">Selecciona</option>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                    <option value="mixto">Mixto</option>
                  </select>
                </label>
                  <fieldset id="register-role-wrapper" class="checkbox-group">
                  <legend>Roles</legend>
                  <label class="checkbox-option">
                    <input type="checkbox" name="roles" value="player" checked />
                    Jugador
                  </label>
                  <label class="checkbox-option">
                    <input type="checkbox" name="roles" value="court_manager" />
                    Gestor de pistas
                  </label>
                  <label class="checkbox-option">
                    <input type="checkbox" name="roles" value="admin" />
                    Administrador
                  </label>
                  <p class="form-hint">Activa ambos si también gestionarás la liga.</p>
                </fieldset>
              </div>
              <label>
                Fecha de nacimiento
                <input type="date" name="birthDate" required />
              </label>
              <label>
                Teléfono de contacto
                <input type="tel" name="phone" autocomplete="tel" required />
              </label>
              <div class="form-grid">
                <label class="checkbox-option checkbox-option--stacked">
                  <input type="checkbox" name="isMember" id="register-is-member" value="true" />
                  Soy socio del club
                  <span class="form-hint">Si marcas esta opción deberás indicar tu número de socio.</span>
                </label>
                <label id="register-membership-wrapper" hidden>
                  Nº de socio
                  <input type="text" name="membershipNumber" id="register-membership-number" maxlength="50" />
                  <span class="form-hint">Se utilizará para vincular tu perfil con el club.</span>
                </label>
              </div>
              <label>
                Fotografía de perfil
                <input type="file" name="photo" accept="image/*" />
                <span class="form-hint">La imagen se almacenará en la base de datos en formato Base64 (máx. 2&nbsp;MB).</span>
              </label>
              <div class="form-grid">
                <label>
                  Horario preferido
                  <select name="preferredSchedule" required>
                    <option value="manana">Mañana</option>
                    <option value="tarde">Tarde</option>
                    <option value="noche">Noche</option>
                    <option value="fin_de_semana">Fin de semana</option>
                    <option value="flexible" selected>Flexible</option>
                  </select>
                </label>
                <label>
                  Talla de camiseta
                  <select name="shirtSize" required>
                    <option value="">Selecciona</option>
                    <option value="XS">XS</option>
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                    <option value="XXL">XXL</option>
                  </select>
                </label>
              </div>
              <label>
                Notas adicionales
                <textarea name="notes" rows="3" maxlength="500" placeholder="Háblanos de tu disponibilidad, club habitual, etc."></textarea>
              </label>
              <button type="submit" class="primary">Crear cuenta</button>
              <p class="status-message" id="register-status"></p>
            </form>
          </div>
        </div>
      </section>

      <section id="app-view" class="app-view" hidden>
        <div class="app-shell">
          <header id="app-sidebar" class="app-header" tabindex="-1">
            <button
              type="button"
              class="mobile-menu-close"
              id="mobile-menu-close"
              aria-label="Cerrar menú"
            >
              <span class="mobile-menu-close__icon" aria-hidden="true"></span>
            </button>
            <div class="app-header__inner">
              <div class="app-header__brand">
                <div class="app-header__logo">
                  <img
                    id="topbar-logo"
                    class="app-header__logo-image"
                    src="assets/club-logo.svg"
                    alt="Logotipo del club"
                  />
                </div>
                <div class="app-switcher" id="app-switcher" role="group" aria-label="Seleccionar aplicación">
                  <button
                    type="button"
                    class="app-switcher__button app-switcher__button--active"
                    data-app="tennis"
                    aria-pressed="true"
                    id="app-switcher-tennis"
                  >
                    Tenis
                  </button>
                  <button
                    type="button"
                    class="app-switcher__button"
                    data-app="padel"
                    aria-pressed="false"
                    id="app-switcher-padel"
                  >
                    Padel
                  </button>
                </div>
              </div>
              <nav id="app-menu" class="main-menu" aria-label="Menú principal" hidden>
                <ul class="main-menu__list">
                  <li class="main-menu__item">
                    <a href="/app/reservas" class="menu-button" data-target="section-court-reservations">
                      Reservar pistas
                    </a>
                  </li>
                  <li class="main-menu__item">
                    <a href="/app/noticias" class="menu-button" data-target="section-chat">
                      <span class="menu-label">Noticias</span>
                      <span class="menu-badge" id="menu-notices-badge" hidden>0</span>
                    </a>
                  </li>
                  <li class="main-menu__item">
                    <a href="/app/notificaciones" class="menu-button" data-target="section-notifications">
                      <span class="menu-label">Notificaciones</span>
                      <span class="menu-badge" id="menu-notifications-badge" hidden>0</span>
                    </a>
                  </li>
                  <li class="main-menu__item menu-group" data-collapsible="true">
                    <a
                      href="/app/ligas"
                      class="menu-button menu-button--parent"
                      data-target="section-league-dashboard"
                      data-instant-navigate="true"
                      aria-expanded="false"
                    >
                      Ligas
                    </a>
                    <div class="menu-submenu" role="group" aria-label="Secciones de ligas" hidden>
                      <ul class="menu-submenu__list">
                        <li>
                          <a
                            href="/app/ligas/inscribirse"
                            class="menu-button menu-button--nested"
                            data-target="section-leagues"
                            data-parent-target="section-league-dashboard"
                          >
                            Inscribirse
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/categorias"
                            class="menu-button menu-button--nested"
                            data-target="section-categories"
                            data-parent-target="section-league-dashboard"
                          >
                            Categorías
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/jugadores"
                            class="menu-button menu-button--nested"
                            data-target="section-league-players"
                            data-parent-target="section-league-dashboard"
                          >
                            Jugadores
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/pagos"
                            class="menu-button menu-button--nested"
                            data-target="section-league-payments"
                            data-parent-target="section-league-dashboard"
                            data-requires-admin="true"
                          >
                            Pagos
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/partidos"
                            class="menu-button menu-button--nested"
                            data-target="section-matches"
                            data-parent-target="section-league-dashboard"
                          >
                            <span class="menu-label">Partidos</span>
                            <span class="menu-badge" id="menu-matches-badge" hidden>0</span>
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/calendario"
                            class="menu-button menu-button--nested"
                            data-target="section-calendar"
                            data-parent-target="section-league-dashboard"
                          >
                            Calendario
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/ranking"
                            class="menu-button menu-button--nested"
                            data-target="section-ranking"
                            data-parent-target="section-league-dashboard"
                          >
                            Ranking
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/ligas/reglamento"
                            class="menu-button menu-button--nested"
                            data-target="section-rules"
                            data-parent-target="section-league-dashboard"
                          >
                            Reglamento
                          </a>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <li class="main-menu__item menu-group" data-collapsible="true">
                    <a
                      href="/app/torneos"
                      class="menu-button menu-button--parent"
                      data-target="section-tournament-dashboard"
                      aria-expanded="false"
                    >
                      Torneos
                    </a>
                    <div class="menu-submenu" role="group" aria-label="Secciones de torneos" hidden>
                      <ul class="menu-submenu__list">
                        <li>
                          <a
                            href="/app/torneos/inscribirse"
                            class="menu-button menu-button--nested"
                            data-target="section-tournaments"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Inscribirse
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/categorias"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-categories"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Categorías
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/cuadros"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-brackets"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Cuadros de juego
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/inscripciones"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-enrollments"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Jugadores
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/dobles"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-doubles"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Dobles
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/pagos"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-payments"
                            data-parent-target="section-tournament-dashboard"
                            data-requires-admin="true"
                          >
                            Pagos
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/partidos"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-matches"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Partidos
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/torneos/reglamento"
                            class="menu-button menu-button--nested"
                            data-target="section-tournament-rules"
                            data-parent-target="section-tournament-dashboard"
                          >
                            Reglamento
                          </a>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <li
                    class="main-menu__item menu-group"
                    data-requires-admin="true"
                    data-admin-visible="toggle"
                    data-collapsible="true"
                    hidden
                  >
                    <a
                      href="/app/administracion"
                      class="menu-button menu-button--parent"
                      data-target="section-admin"
                      data-requires-admin="true"
                      aria-expanded="false"
                    >
                      Administración
                    </a>
                    <div class="menu-submenu" role="group" aria-label="Secciones de administración" hidden>
                      <ul class="menu-submenu__list">
                        <li>
                          <a
                            href="/app/administracion/club"
                            class="menu-button menu-button--nested"
                            data-target="section-club"
                            data-parent-target="section-admin"
                            data-requires-admin="true"
                          >
                            Club
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/administracion/pistas"
                            class="menu-button menu-button--nested"
                            data-target="section-court-admin"
                            data-parent-target="section-admin"
                            data-requires-court-manager="true"
                          >
                            Gestión de pistas
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/administracion/usuarios"
                            class="menu-button menu-button--nested"
                            data-target="section-user-directory"
                            data-parent-target="section-admin"
                            data-requires-admin="true"
                          >
                            Usuarios
                          </a>
                        </li>
                        <li>
                          <a
                            href="/app/administracion/modo-demo"
                            class="menu-button menu-button--nested"
                            data-target="section-demo-mode"
                            data-parent-target="section-admin"
                            data-requires-admin="true"
                          >
                            Modo demo
                          </a>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <li class="main-menu__item">
                    <a href="/app/mi-cuenta" class="menu-button" data-target="section-account">Mi cuenta</a>
                  </li>
                  <li class="main-menu__item">
                    <button
                      type="button"
                      class="menu-button menu-button--logout"
                      data-action="logout"
                      aria-label="Cerrar sesión"
                      title="Cerrar sesión"
                    >
                      Cerrar sesión
                    </button>
                  </li>
                </ul>
              </nav>
              <div class="app-header__actions" data-admin-visible="toggle" hidden></div>
            </div>
          </header>

          <div class="mobile-menu-backdrop" id="mobile-menu-backdrop" hidden></div>

          <div class="app-main" id="app-content">
            <header class="mobile-topbar" id="mobile-topbar">
              <div class="mobile-topbar__brand">
                <img
                  id="mobile-topbar-logo"
                  class="mobile-topbar__logo"
                  src="assets/club-logo.svg"
                  alt="Logotipo del club"
                />
                <span id="mobile-topbar-title" class="mobile-topbar__title">C.N. Playa San Marcos</span>
              </div>
              <button
                type="button"
                class="mobile-menu-toggle"
                id="mobile-menu-toggle"
                aria-expanded="false"
                aria-controls="app-sidebar"
              >
                <span class="mobile-menu-toggle__icon" aria-hidden="true"></span>
                <span class="mobile-menu-toggle__label">Menú</span>
              </button>
            </header>
            <p id="global-message" class="banner" role="status"></p>

            <section id="section-dashboard" class="app-section" hidden>
              <article class="card">
                <div class="card-header">
                  <div>
                    <h3>Visión general</h3>
                    <p class="card-subtitle">Resumen global de ligas, torneos y ocupación de pistas.</p>
                  </div>
                </div>
                <div class="dashboard-metrics">
                  <div class="metric-card">
                    <span class="metric-label">Ligas activas</span>
                    <strong id="global-leagues-count">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Torneos activos</span>
                    <strong id="global-tournaments-count">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Categorías totales</span>
                    <strong id="global-categories-count">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Pistas ocupadas</span>
                    <strong id="global-courts-count">0</strong>
                  </div>
                </div>
              </article>

              <div class="dashboard-grid" id="global-dashboard-grid">
                <article class="card">
                  <div class="card-header">
                    <h3>Ligas</h3>
                  </div>
                  <ul class="list" id="global-leagues-list">
                    <li class="empty-state">Cargando ligas activas...</li>
                  </ul>
                </article>
                <article class="card">
                  <div class="card-header">
                    <h3>Torneos</h3>
                  </div>
                  <ul class="list" id="global-tournaments-list">
                    <li class="empty-state">Cargando torneos programados...</li>
                  </ul>
                </article>
                <article class="card">
                  <div class="card-header">
                    <h3>Próximos partidos</h3>
                  </div>
                  <ul class="list" id="global-upcoming-matches">
                    <li class="empty-state">Consulta los próximos partidos programados en ligas y torneos.</li>
                  </ul>
                </article>
              </div>
            </section>

            <section id="section-league-dashboard" class="app-section" hidden>
              <article class="card">
                <div class="card-header">
                  <div>
                    <h3>Dashboard de ligas</h3>
                    <p class="card-subtitle">Resumen de categorías activas, rankings y programación.</p>
                  </div>
                </div>
                <div class="dashboard-highlight" id="league-active-summary" hidden>
                  <div class="dashboard-highlight__count">
                    <span class="dashboard-highlight__label">Ligas activas</span>
                    <strong id="league-active-count">0</strong>
                  </div>
                  <div class="dashboard-highlight__list" id="league-active-list">
                    <span class="empty-state">No hay ligas activas registradas.</span>
                  </div>
                </div>

                <div class="dashboard-metrics">
                  <div class="metric-card">
                    <span class="metric-label">Jugadores únicos</span>
                    <strong id="league-metric-players">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Categorías activas</span>
                    <strong id="league-metric-categories">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Próximos partidos</span>
                    <strong id="league-metric-upcoming">0</strong>
                  </div>
                </div>
              </article>

              <div class="dashboard-grid" id="league-dashboard-grid">
                <article class="card">
                  <div class="card-header">
                    <h3>Ranking por categoría</h3>
                  </div>
                  <div id="league-ranking-cards" class="card-collection">
                    <p class="empty-state">Aún no hay categorías disponibles.</p>
                  </div>
                </article>
                <article class="card league-enrolled-card">
                  <div class="card-header">
                    <h3>Jugadores inscritos</h3>
                    <nav
                      id="league-enrolled-pagination"
                      class="league-enrolled-pagination"
                      aria-label="Paginación de jugadores inscritos"
                      hidden
                    ></nav>
                  </div>
                  <ul class="list league-enrolled-list" id="league-enrolled-players">
                    <li class="empty-state">Aún no hay jugadores inscritos.</li>
                  </ul>
                </article>
                <article class="card">
                  <div class="card-header">
                    <h3>Próximos partidos</h3>
                  </div>
                  <ul class="list" id="league-upcoming-matches">
                    <li class="empty-state">Todavía no hay partidos programados.</li>
                  </ul>
                </article>
              </div>
            </section>

            <section id="section-club" class="app-section" hidden>
              <article class="card" id="club-card">
                <div class="card-header">
                  <div>
                    <h3>Información del club</h3>
                    <p class="card-subtitle">Horarios, instalaciones y datos de contacto.</p>
                  </div>
                  <button
                    type="button"
                    class="secondary"
                    id="club-edit-button"
                    data-admin-visible="toggle"
                    hidden
                  >
                    Editar
                  </button>
                </div>
                <div class="club-layout">
                  <aside class="club-summary">
                    <div class="club-identity">
                      <div class="club-logo" id="club-logo-display" aria-hidden="true"></div>
                      <div>
                        <h4 id="club-name-display">C.N. Playa San Marcos</h4>
                        <p id="club-slogan-display" class="club-slogan-text">Liga social de tenis</p>
                      </div>
                    </div>
                    <p id="club-description" class="club-description"></p>
                    <dl class="club-info-list">
                      <div>
                        <dt>Dirección</dt>
                        <dd id="club-address">—</dd>
                      </div>
                      <div>
                        <dt>Contacto</dt>
                        <dd id="club-contact">—</dd>
                      </div>
                      <div>
                        <dt>Sitio web</dt>
                        <dd id="club-website">—</dd>
                      </div>
                    </dl>
                  </aside>
                  <div class="club-details">
                    <section>
                      <h4>Horarios preferentes</h4>
                      <ul id="club-schedule-list" class="bullet-list"></ul>
                      <p class="empty-state" id="club-schedule-empty" hidden>
                        Aún no hay horarios publicados.
                      </p>
                    </section>
                    <section>
                      <h4>Pistas disponibles</h4>
                      <ul id="club-courts-list" class="bullet-list"></ul>
                      <p class="empty-state" id="club-courts-empty" hidden>
                        Añade las pistas disponibles para planificar partidos.
                      </p>
                    </section>
                    <section>
                      <h4>Servicios del club</h4>
                      <ul id="club-facilities-list" class="bullet-list"></ul>
                      <p class="empty-state" id="club-facilities-empty" hidden>
                        Describe los servicios destacados del club.
                      </p>
                    </section>
                  </div>
                </div>
                <p class="status-message" id="club-status"></p>
              </article>
            </section>

            <section id="section-leagues" class="app-section" hidden>
              <div class="league-grid">
                <article class="card" id="leagues-card">
                  <div class="card-header">
                    <h3>Ligas registradas</h3>
                    <button
                      type="button"
                      class="primary"
                      id="league-create-button"
                      data-admin-only="true"
                      data-admin-visible="toggle"
                      hidden
                    >
                      Nueva liga
                    </button>
                  </div>
                  <ul class="list" id="leagues-list">
                    <li class="empty-state">Crea una liga para iniciar una nueva temporada.</li>
                  </ul>
                </article>
                <article class="card" id="league-detail-card">
                  <div class="card-header">
                    <div>
                      <h3 id="league-detail-title">Detalle de la liga</h3>
                      <p class="card-subtitle" id="league-detail-subtitle">
                        Selecciona una liga para ver la información ampliada.
                      </p>
                    </div>
                    <div class="card-actions">
                      <button
                        type="button"
                        class="secondary"
                        id="league-edit-button"
                        data-admin-only="true"
                        data-admin-visible="toggle"
                        hidden
                      >
                        Editar liga
                      </button>
                    </div>
                  </div>
                  <div class="league-detail" id="league-detail-body">
                    <p class="empty-state">Selecciona una liga de la lista para ver sus detalles.</p>
                  </div>
                </article>
              </div>
            </section>

            <section id="section-categories" class="app-section" hidden>
              <article class="card" id="categories-card">
                <div class="card-header">
                  <h3>Categorías activas</h3>
                  <button
                    type="button"
                    class="primary"
                    id="category-create-button"
                    data-admin-only="true"
                    data-admin-visible="toggle"
                    hidden
                  >
                    Nueva categoría
                  </button>
                </div>
                <div class="categories-toolbar">
                  <label class="inline-field">
                    Filtro de ligas
                    <select id="categories-league-filter" disabled></select>
                  </label>
                  <span class="categories-toolbar__note">de más antigua a más nueva</span>
                </div>
                <ul class="list" id="categories-list"></ul>
              </article>
            </section>

            <section id="section-league-players" class="app-section" hidden>
              <article class="card" id="league-players-card">
                <div class="card-header">
                  <div>
                    <h3>Jugadores inscritos</h3>
                    <p class="card-subtitle">
                      Consulta y filtra a los participantes inscritos en cada liga y categoría.
                    </p>
                  </div>
                </div>
                <div class="player-directory-summary">
                  Resultados: <strong id="league-players-count">0</strong>
                </div>
                <div class="player-directory-controls">
                  <label class="inline-field">
                    Liga
                    <select id="league-players-league" disabled></select>
                  </label>
                  <label class="inline-field">
                    Categoría
                    <select id="league-players-category" disabled></select>
                  </label>
                  <label class="inline-field">
                    Búsqueda
                    <input
                      type="search"
                      id="league-players-search"
                      placeholder="Nombre, correo o teléfono"
                      disabled
                    />
                  </label>
                  <label class="inline-field">
                    Género
                    <select id="league-players-gender" disabled>
                      <option value="">Todos</option>
                      <option value="masculino">Masculino</option>
                      <option value="femenino">Femenino</option>
                      <option value="mixto">Mixto</option>
                    </select>
                  </label>
                </div>
                <ul class="list" id="league-players-list"></ul>
                <div class="empty-state" id="league-players-empty" hidden>
                  Selecciona una liga para ver los jugadores inscritos.
                </div>
              </article>
            </section>

            <section id="section-league-payments" class="app-section" data-admin-only="true" hidden>
              <article class="card" id="league-payments-card">
                <div class="card-header">
                  <div>
                    <h3>Pagos de inscripción</h3>
                    <p class="card-subtitle">
                      Supervisa el estado de los pagos de los jugadores inscritos en ligas con cuota.
                    </p>
                  </div>
                </div>
                <div class="league-payments-controls">
                  <label class="inline-field">
                    Liga con cuota
                    <select id="league-payments-league" disabled></select>
                  </label>
                  <label class="inline-field">
                    Búsqueda
                    <input
                      type="search"
                      id="league-payments-search"
                      placeholder="Nombre o correo"
                      disabled
                    />
                  </label>
                </div>
                <div class="league-payments-summary">
                  Registros: <strong id="league-payments-count">0</strong>
                  <span class="tag" id="league-payments-fee" hidden></span>
                </div>
                <div class="league-payments-groups" id="league-payments-groups">
                  <section
                    class="league-payments-group"
                    data-status="pending"
                    aria-labelledby="league-payments-pending-title"
                  >
                    <div class="league-payments-group-header">
                      <h4 id="league-payments-pending-title">Pagos pendientes</h4>
                      <div class="league-payments-group-stats">
                        <span class="tag" id="league-payments-pending-count">0</span>
                        <span class="tag" id="league-payments-pending-total">0,00&nbsp;EUR</span>
                      </div>
                    </div>
                    <ul class="list league-payments-list" id="league-payments-pending"></ul>
                    <p class="empty-state" id="league-payments-pending-empty" hidden>
                      No hay pagos pendientes.
                    </p>
                  </section>
                  <section
                    class="league-payments-group"
                    data-status="paid"
                    aria-labelledby="league-payments-paid-title"
                  >
                    <div class="league-payments-group-header">
                      <h4 id="league-payments-paid-title">Pagos registrados</h4>
                      <div class="league-payments-group-stats">
                        <span class="tag" id="league-payments-paid-count">0</span>
                        <span class="tag" id="league-payments-paid-total">0,00&nbsp;EUR</span>
                      </div>
                    </div>
                    <ul class="list league-payments-list" id="league-payments-paid"></ul>
                    <p class="empty-state" id="league-payments-paid-empty" hidden>
                      No hay pagos registrados.
                    </p>
                  </section>
                </div>
                <div class="empty-state" id="league-payments-empty" hidden>
                  Configura una liga con cuota de inscripción para gestionar pagos.
                </div>
                <p class="status-message" id="league-payments-status"></p>
              </article>
            </section>

            <section id="section-tournaments" class="app-section" hidden>
              <div class="tournament-grid">
                <article class="card" id="tournaments-card">
                  <div class="card-header">
                    <div>
                      <h3>Torneos disponibles</h3>
                      <p class="card-subtitle">Consulta el estado y fechas de los torneos programados.</p>
                    </div>
                    <div class="card-actions">
                      <button
                        type="button"
                        class="primary"
                        id="tournament-create-button"
                        data-admin-only="true"
                        data-admin-visible="toggle"
                        hidden
                      >
                        Nuevo torneo
                      </button>
                    </div>
                  </div>
                  <ul class="list" id="tournaments-list"></ul>
                </article>
                <article class="card" id="tournament-detail-card">
                  <div class="card-header">
                    <div>
                      <h3 id="tournament-detail-title">Detalle del torneo</h3>
                      <p class="card-subtitle" id="tournament-detail-subtitle">
                        Selecciona un torneo para ver la información ampliada.
                      </p>
                    </div>
                  <div class="card-actions">
                    <button
                      type="button"
                      class="primary"
                      id="tournament-admin-enroll-button"
                      data-admin-only="true"
                      data-admin-visible="toggle"
                      hidden
                    >
                      Inscribir jugadores
                    </button>
                    <button
                      type="button"
                      class="secondary"
                      id="tournament-edit-button"
                      data-admin-only="true"
                        data-admin-visible="toggle"
                        hidden
                      >
                        Editar torneo
                      </button>
                    </div>
                  </div>
                  <div class="tournament-detail" id="tournament-detail-body"></div>
                </article>
              </div>
            </section>

            <section id="section-tournament-dashboard" class="app-section" hidden>
              <article class="card">
                <div class="card-header">
                  <div>
                    <h3>Dashboard de torneos</h3>
                    <p class="card-subtitle">Seguimiento de cuadros y programación general.</p>
                  </div>
                </div>
                <div class="dashboard-metrics">
                  <div class="metric-card">
                    <span class="metric-label">Torneos activos</span>
                    <strong id="tournament-metric-active">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Categorías activas</span>
                    <strong id="tournament-metric-categories">0</strong>
                  </div>
                  <div class="metric-card">
                    <span class="metric-label">Próximos partidos</span>
                    <strong id="tournament-metric-upcoming">0</strong>
                  </div>
                </div>
              </article>

              <div class="dashboard-grid" id="tournament-dashboard-grid">
                <article class="card">
                  <div class="card-header">
                    <h3>Cuadros por categoría</h3>
                  </div>
                  <div id="tournament-draw-cards" class="card-collection">
                    <p class="empty-state">No hay cuadros publicados por ahora.</p>
                  </div>
                </article>
                <article class="card">
                  <div class="card-header">
                    <h3>Próximos partidos</h3>
                  </div>
                  <ul class="list" id="tournament-upcoming-matches">
                    <li class="empty-state">No hay partidos de torneo programados.</li>
                  </ul>
                </article>
              </div>
            </section>

            <section id="section-tournament-categories" class="app-section" hidden>
                <article class="card" id="tournament-categories-card">
                  <div class="card-header">
                    <div>
                      <h3>Categorías del torneo</h3>
                      <p class="card-subtitle">Revisa las divisiones disponibles para cada torneo.</p>
                    </div>
                    <div class="card-actions">
                      <label class="inline-field">
                        Torneo
                        <select id="tournament-category-tournament"></select>
                      </label>
                      <button
                        type="button"
                        class="secondary"
                        id="tournament-category-create-button"
                        data-admin-only="true"
                        data-admin-visible="toggle"
                        hidden
                      >
                        Nueva categoría
                      </button>
                    </div>
                  </div>
                  <figure class="tournament-categories__poster" id="tournament-categories-poster" hidden></figure>
                  <ul class="list" id="tournament-categories-list"></ul>
                  <p class="empty-state" id="tournament-categories-empty">
                    Selecciona un torneo para consultar sus categorías.
                  </p>
              </article>
            </section>

            <section id="section-tournament-brackets" class="app-section" hidden>
              <article class="card" id="tournament-brackets-card">
                <div class="card-header">
                  <div>
                    <h3>Cuadros de juego</h3>
                    <p class="card-subtitle">
                      Gestiona las siembras y visualiza el avance del cuadro principal.
                    </p>
                  </div>
                </div>
                <div class="tournament-bracket-controls">
                  <label class="inline-field">
                    Torneo
                    <select id="tournament-bracket-tournament"></select>
                  </label>
                  <label class="inline-field">
                    Categoría
                    <select id="tournament-bracket-category" disabled></select>
                  </label>
                  <label
                    class="inline-field"
                    id="tournament-bracket-size-wrapper"
                    data-admin-visible="toggle"
                    hidden
                  >
                    Tamaño del cuadro
                    <select id="tournament-bracket-size"></select>
                  </label>
                  <div class="tournament-bracket-actions">
                    <div class="tournament-bracket-admin-actions" data-admin-visible="toggle" hidden>
                      <button type="button" class="secondary" id="tournament-bracket-save-seeds" disabled>
                        Guardar cabezas de serie
                      </button>
                      <button type="button" class="primary" id="tournament-bracket-generate" disabled>
                        Generar cuadro
                      </button>
                      <button type="button" class="ghost" id="tournament-bracket-recalculate" disabled>
                        Recalcular cuadro
                      </button>
                    </div>
                  </div>
                </div>
                <p class="status-message" id="tournament-bracket-status"></p>
              </article>
              <div class="tournament-bracket-layout">
                <article
                  class="card tournament-seeds-card"
                  id="tournament-bracket-seeds-card"
                  data-admin-visible="toggle"
                  hidden
                >
                  <div class="card-header">
                    <div>
                      <h4>Cabezas de serie</h4>
                      <p class="card-subtitle">
                        Selecciona los jugadores que se ubicarán en posiciones clave del cuadro.
                      </p>
                    </div>
                  </div>
                  <div id="tournament-bracket-seeds" class="tournament-seed-list">
                    <p class="empty-state">
                      Selecciona un torneo y categoría para configurar las siembras.
                    </p>
                  </div>
                </article>
                <article class="card tournament-bracket-card" id="tournament-bracket-view-card">
                  <div class="card-header">
                    <div>
                      <h4>Cuadro principal</h4>
                      <p class="card-subtitle">
                        Consulta el avance por rondas y los resultados registrados.
                      </p>
                    </div>
                    <div class="card-actions">
                      <button type="button" class="ghost" id="tournament-bracket-fullscreen">
                        Ver a pantalla completa
                      </button>
                    </div>
                  </div>
                  <div class="tournament-bracket-view" id="tournament-bracket-view">
                    <p class="empty-state" id="tournament-bracket-empty">
                      Selecciona una categoría para visualizar su cuadro de juego.
                    </p>
                  </div>
                </article>
                <article
                  class="card tournament-bracket-card tournament-consolation-card"
                  id="tournament-consolation-view-card"
                  hidden
                >
                  <div class="card-header">
                    <div>
                      <h4>Cuadro de consolación</h4>
                      <p class="card-subtitle">
                        Consulta el desarrollo del cuadro de consolación una vez generado.
                      </p>
                    </div>
                    <div class="card-actions">
                      <button type="button" class="ghost" id="tournament-consolation-fullscreen">
                        Ver a pantalla completa
                      </button>
                    </div>
                  </div>
                  <div class="tournament-bracket-view" id="tournament-consolation-view">
                    <p class="empty-state" id="tournament-consolation-empty">
                      El cuadro de consolación se mostrará aquí cuando esté disponible.
                    </p>
                  </div>
                </article>
              </div>
            </section>

            <section id="section-tournament-enrollments" class="app-section" hidden>
              <article class="card" id="tournament-enrollments-card">
                <div class="card-header">
                  <div>
                    <h3>Jugadores inscritos</h3>
                    <p class="card-subtitle">
                      Consulta y filtra a los participantes inscritos en cada torneo y categoría.
                    </p>
                  </div>
                </div>
                <div class="player-directory-summary">
                  Resultados: <strong id="tournament-enrollment-count">0</strong>
                </div>
                <div class="player-directory-controls">
                  <label class="inline-field">
                    Torneo
                    <select id="tournament-enrollment-tournament" disabled></select>
                  </label>
                  <label class="inline-field">
                    Categoría
                    <select id="tournament-enrollment-category" disabled></select>
                  </label>
                  <label class="inline-field">
                    Búsqueda
                    <input
                      type="search"
                      id="tournament-enrollment-search"
                      placeholder="Nombre, correo o teléfono"
                      disabled
                    />
                  </label>
                  <label class="inline-field">
                    Género
                    <select id="tournament-enrollment-gender" disabled>
                      <option value="">Todos</option>
                      <option value="masculino">Masculino</option>
                      <option value="femenino">Femenino</option>
                      <option value="mixto">Mixto</option>
                    </select>
                  </label>
                  <div
                    class="player-directory-controls__action"
                    data-admin-only="true"
                    data-admin-visible="toggle"
                    hidden
                  >
                    <button type="button" class="secondary" id="tournament-enrollment-add-button">
                      Inscribir jugador
                    </button>
                  </div>
                </div>
                <ul class="list" id="tournament-enrollment-list"></ul>
                <div class="empty-state" id="tournament-enrollment-empty">
                  Selecciona un torneo para consultar los jugadores inscritos.
                </div>
              </article>
            </section>

            <section id="section-tournament-doubles" class="app-section" hidden>
              <article class="card" id="tournament-doubles-card">
                <div class="card-header">
                  <div>
                    <h3>Parejas de dobles</h3>
                    <p class="card-subtitle">
                      Consulta y gestiona las parejas inscritas en categorías de dobles.
                    </p>
                  </div>
                  <div class="card-actions">
                    <label class="inline-field">
                      Torneo
                      <select id="tournament-doubles-tournament"></select>
                    </label>
                  </div>
                </div>
                <div id="tournament-doubles-container" class="card-collection"></div>
                <p class="empty-state" id="tournament-doubles-empty">
                  Selecciona un torneo para ver las inscripciones de dobles.
                </p>
              </article>
            </section>

            <section
              id="section-tournament-payments"
              class="app-section"
              data-admin-only="true"
              hidden
            >
              <article class="card" id="tournament-payments-card">
                <div class="card-header">
                  <div>
                    <h3>Pagos del torneo</h3>
                    <p class="card-subtitle">
                      Supervisa los registros de inscripción y el estado de sus pagos.
                    </p>
                  </div>
                </div>
                <div class="tournament-payments-controls">
                  <label class="inline-field">
                    Torneo
                    <select id="tournament-payments-tournament" disabled></select>
                  </label>
                  <label class="inline-field">
                    Búsqueda
                    <input
                      type="search"
                      id="tournament-payments-search"
                      placeholder="Nombre, correo o teléfono"
                      disabled
                    />
                  </label>
                </div>
                <div class="tournament-payments-summary">
                  Registros: <strong id="tournament-payments-count">0</strong>
                  <span class="tag" id="tournament-payments-fee" hidden></span>
                </div>
                <div class="tournament-payments-groups" id="tournament-payments-groups">
                  <section
                    class="tournament-payments-group"
                    data-status="pending"
                    aria-labelledby="tournament-payments-pending-title"
                  >
                    <div class="tournament-payments-group-header">
                      <h4 id="tournament-payments-pending-title">Pagos pendientes</h4>
                      <div class="tournament-payments-group-stats">
                        <span class="tag" id="tournament-payments-pending-count">0</span>
                        <span class="tag" id="tournament-payments-pending-total">0,00&nbsp;EUR</span>
                      </div>
                    </div>
                    <ul class="list tournament-payments-list" id="tournament-payments-pending"></ul>
                    <p class="empty-state" id="tournament-payments-pending-empty" hidden>
                      No hay pagos pendientes.
                    </p>
                  </section>
                  <section
                    class="tournament-payments-group"
                    data-status="paid"
                    aria-labelledby="tournament-payments-paid-title"
                  >
                    <div class="tournament-payments-group-header">
                      <h4 id="tournament-payments-paid-title">Pagos registrados</h4>
                      <div class="tournament-payments-group-stats">
                        <span class="tag" id="tournament-payments-paid-count">0</span>
                        <span class="tag" id="tournament-payments-paid-total">0,00&nbsp;EUR</span>
                      </div>
                    </div>
                    <ul class="list tournament-payments-list" id="tournament-payments-paid"></ul>
                    <p class="empty-state" id="tournament-payments-paid-empty" hidden>
                      No hay pagos registrados.
                    </p>
                  </section>
                </div>
                <div class="empty-state" id="tournament-payments-empty" hidden>
                  Selecciona un torneo con cuotas para gestionar los pagos.
                </div>
                <p class="status-message" id="tournament-payments-status"></p>
              </article>
            </section>

            <section id="section-tournament-matches" class="app-section" hidden>
              <article class="card" id="tournament-matches-card">
                  <div class="card-header">
                    <div>
                      <h3>Partidos del torneo</h3>
                      <p class="card-subtitle">Consulta los cruces planificados y sus horarios.</p>
                    </div>
                  <div class="card-actions">
                    <label class="inline-field">
                      Torneo
                      <select id="tournament-match-tournament"></select>
                    </label>
                    <label class="inline-field">
                      Categoría
                      <select id="tournament-match-category" disabled></select>
                    </label>
                    <label class="inline-field">
                      Día
                      <input type="date" id="tournament-order-day" disabled />
                    </label>
                    <button type="button" class="secondary" id="tournament-order-download" disabled>
                      Descargar orden de juego
                    </button>
                  </div>
                </div>
                <ul class="list" id="tournament-matches-list"></ul>
                <p class="empty-state" id="tournament-matches-empty">
                  Selecciona una categoría para revisar sus partidos.
                </p>
              </article>
            </section>

            <section id="section-tournament-rules" class="app-section" hidden>
              <article class="card" id="tournament-rules-card">
                <div class="card-header">
                  <h3>Reglamento de torneos</h3>
                  <div class="card-actions">
                    <button
                      type="button"
                      class="secondary"
                      id="tournament-rules-edit-button"
                      data-admin-visible="toggle"
                      hidden
                    >
                      Editar reglamento
                    </button>
                  </div>
                </div>
                <div class="rules-content" id="tournament-rules-content"></div>
              </article>
            </section>

            <section id="section-matches" class="app-section" hidden>
              <div class="matches-grid">
                <article class="card" id="upcoming-card">
                  <div class="card-header">
                    <h3>Partidos programados</h3>
                    <div class="card-actions">
                      <button
                        type="button"
                        class="secondary"
                        id="match-generate-button"
                        data-admin-only="true"
                        data-admin-visible="toggle"
                        hidden
                      >
                        Generar pendientes
                      </button>
                      <button
                        type="button"
                        class="primary"
                        id="match-create-button"
                        data-admin-only="true"
                        data-admin-visible="toggle"
                        hidden
                      >
                        Nuevo partido
                      </button>
                    </div>
                  </div>
                  <ul class="list" id="upcoming-matches"></ul>
                </article>

                <article class="card" id="pending-approvals-card">
                  <div class="card-header">
                    <h3>Partidos pendientes por aprobar</h3>
                    <p class="card-subtitle">Resultados que esperan confirmación de los jugadores.</p>
                  </div>
                  <ul class="list" id="pending-approvals"></ul>
                </article>

                <article class="card" id="my-matches-card">
                  <div class="card-header">
                    <div>
                      <h3>Mis partidos</h3>
                      <p class="card-subtitle">Propón fecha y hora cuando veas un enfrentamiento pendiente.</p>
                    </div>
                  </div>
                  <ul class="list" id="my-matches"></ul>
                </article>

                <article class="card" id="completed-card">
                  <div class="card-header">
                    <h3>Partidos disputados</h3>
                    <p class="card-subtitle">Consulta resultados confirmados y sets jugados.</p>
                  </div>
                  <ul class="list" id="completed-matches"></ul>
                </article>

                <article
                  class="card"
                  id="admin-matches-card"
                  data-admin-only="true"
                  data-admin-visible="toggle"
                  hidden
                >
                  <div class="card-header">
                    <div>
                      <h3>Gestión de partidos</h3>
                      <p class="card-subtitle">
                        Selecciona un enfrentamiento pendiente o programado para actualizarlo o eliminarlo.
                      </p>
                    </div>
                    <div class="card-actions">
                      <label class="inline-field">
                        Partido
                        <select id="admin-match-select">
                          <option value="">Elige un partido pendiente o programado</option>
                        </select>
                      </label>
                    </div>
                  </div>

                  <form id="admin-match-form" class="form">
                    <div class="form-grid">
                      <label>
                        Categoría
                        <select id="admin-match-category" name="categoryId">
                          <option value="">Selecciona una categoría</option>
                        </select>
                      </label>
                      <label>
                        Estado
                        <select id="admin-match-status-select" name="status">
                          <option value="pendiente">Pendiente</option>
                          <option value="propuesto">Propuesto</option>
                          <option value="programado">Programado</option>
                          <option value="revision">En revisión</option>
                        </select>
                      </label>
                    </div>

                    <div class="form-grid">
                      <label>
                        Jugador 1
                        <select id="admin-match-player1" name="player1">
                          <option value="">Selecciona un jugador</option>
                        </select>
                      </label>
                      <label>
                        Jugador 2
                        <select id="admin-match-player2" name="player2">
                          <option value="">Selecciona un jugador</option>
                        </select>
                      </label>
                    </div>

                    <div class="form-grid">
                      <div>
                        <div id="admin-match-schedule-container" class="match-schedule-field" hidden>
                          <input
                            id="admin-match-day"
                            type="date"
                            name="scheduledDate"
                            class="sr-only"
                            aria-label="Día del partido"
                          />
                          <div class="match-schedule-picker" id="admin-match-slot-picker" aria-live="polite"></div>
                          <div class="match-schedule-actions">
                            <button type="button" id="admin-match-clear-slot" class="ghost">
                              Borrar selección
                            </button>
                            <span class="form-hint"
                              >Selecciona un hueco disponible para asignar pista automáticamente.</span
                            >
                          </div>
                        </div>
                        <label id="admin-match-datetime-field">
                          Fecha y hora
                          <input id="admin-match-datetime" type="datetime-local" />
                          <span class="form-hint">Déjalo vacío para mantener el partido pendiente.</span>
                        </label>
                        <input type="hidden" id="admin-match-date" name="scheduledAt" />
                        <input type="hidden" id="admin-match-court" name="court" />
                      </div>
                    </div>

                    <label>
                      Notas internas
                      <textarea
                        id="admin-match-notes"
                        name="notes"
                        rows="3"
                        maxlength="500"
                        placeholder="Comentarios visibles solo para administradores"
                      ></textarea>
                    </label>

                    <div class="form-actions">
                      <button type="submit" class="primary">Guardar cambios</button>
                      <button type="button" id="admin-match-cancel" class="ghost" hidden>Cancelar</button>
                      <button type="button" id="admin-match-delete" class="danger" hidden>
                        Eliminar partido
                      </button>
                    </div>
                  </form>

                  <p class="status-message" id="admin-match-status-message"></p>

                  <h4>Partidos activos</h4>
                  <ul class="list" id="admin-match-list">
                    <li class="empty-state">No hay partidos activos.</li>
                  </ul>
                </article>
              </div>
            </section>

            <section id="section-calendar" class="app-section" hidden>
              <article class="card calendar-card">
                <div class="card-header">
                  <div>
                    <h3>Calendario general</h3>
                    <p class="card-subtitle">Partidos confirmados de todas las categorías.</p>
                  </div>
                  <div class="calendar-actions">
                    <div
                      class="calendar-view-toggle"
                      role="group"
                      aria-label="Cambiar vista del calendario"
                    >
                      <button
                        type="button"
                        class="calendar-view-button"
                        data-global-calendar-view="day"
                        aria-pressed="false"
                      >
                        Día
                      </button>
                      <button
                        type="button"
                        class="calendar-view-button is-active"
                        data-global-calendar-view="month"
                        aria-pressed="true"
                      >
                        Mes
                      </button>
                    </div>
                    <div class="calendar-nav">
                      <button type="button" id="global-calendar-prev" aria-label="Ver periodo anterior">‹</button>
                      <span id="global-calendar-label" class="calendar-label"></span>
                      <button type="button" id="global-calendar-next" aria-label="Ver periodo siguiente">›</button>
                    </div>
                  </div>
                </div>
                <div id="global-calendar" class="calendar-container"></div>
              </article>
            </section>

            <section id="section-court-reservations" class="app-section" hidden>
              <div class="court-reservations-layout">
                <article class="card" id="player-court-calendar-card">
                  <div class="card-header">
                    <div>
                      <h3>Calendario de pistas</h3>
                      <p class="card-subtitle">
                        Consulta las franjas disponibles y reserva tu pista en la vista de día.
                      </p>
                    </div>
                    <div class="calendar-actions">
                      <div class="calendar-nav">
                        <button
                          type="button"
                          class="ghost"
                          id="player-court-calendar-prev"
                          aria-label="Ver día anterior"
                        >
                          ◀
                        </button>
                        <span class="calendar-label" id="player-court-calendar-label"></span>
                        <button
                          type="button"
                          class="ghost"
                          id="player-court-calendar-next"
                          aria-label="Ver día siguiente"
                        >
                          ▶
                        </button>
                      </div>
                      <label class="inline-field calendar-date-picker">
                        <span class="sr-only">Seleccionar fecha</span>
                        <input type="date" id="player-court-calendar-date" />
                      </label>
                    </div>
                  </div>
                  <div class="calendar-container" id="player-court-calendar-container">
                    <p class="empty-state">
                      Selecciona una fecha para consultar la disponibilidad de pistas y realizar reservas.
                    </p>
                  </div>
                  <p class="status-message" id="player-court-calendar-status"></p>
                </article>

                <article class="card" id="court-reservations-card">
                  <div class="card-header">
                    <h3>Mis reservas</h3>
                  </div>
                  <ul class="list" id="court-reservation-list">
                    <li class="empty-state" id="court-reservation-empty">
                      Aún no tienes reservas activas.
                    </li>
                  </ul>
                </article>
              </div>
            </section>

            <section id="section-ranking" class="app-section" hidden>
              <article class="card" id="ranking-card">
                <div class="card-header">
                  <div>
                    <h3>Ranking por categoría</h3>
                    <p class="card-subtitle">Consulta la clasificación completa de cada división.</p>
                  </div>
                  <div class="card-actions">
                    <label class="inline-field">
                      Liga
                      <select id="ranking-league-filter" disabled>
                        <option value="">Todas las ligas</option>
                      </select>
                    </label>
                    <button id="ranking-print-button" type="button" class="secondary">
                      Imprimir ranking
                    </button>
                  </div>
                </div>
                <p class="status-message" id="ranking-status"></p>
                <div id="ranking-category-list" class="ranking-category-list"></div>
                <div class="empty-state" id="ranking-empty" hidden>No hay categorías disponibles.</div>
              </article>
            </section>

            <section id="section-chat" class="app-section" hidden>
                <div class="chat-grid">
                  <article class="card chat-card">
                    <div class="card-header">
                      <h3>Noticias</h3>
                      <p class="card-subtitle">
                        Los administradores publican novedades y recordatorios para toda la liga.
                      </p>
                    </div>
                    <ul class="chat-messages" id="general-chat-messages"></ul>
                    <form id="general-chat-form" class="chat-form" data-admin-visible="toggle">
                      <div class="chat-editor">
                        <div class="chat-toolbar" id="general-chat-toolbar" role="toolbar" aria-label="Formato del aviso">
                          <button type="button" class="chat-toolbar-button" data-command="bold" aria-label="Negrita">
                            <span aria-hidden="true">B</span>
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="italic" aria-label="Cursiva">
                            <span aria-hidden="true">I</span>
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="underline" aria-label="Subrayado">
                            <span aria-hidden="true">U</span>
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="heading" data-level="1" aria-label="Encabezado nivel 1">
                            H1
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="heading" data-level="2" aria-label="Encabezado nivel 2">
                            H2
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="list" data-list="unordered" aria-label="Lista con viñetas">
                            •
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="list" data-list="ordered" aria-label="Lista numerada">
                            1.
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="quote" aria-label="Cita">
                            “ ”
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="link" aria-label="Insertar enlace">
                            🔗
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="clear" aria-label="Limpiar formato">
                            ⌫
                          </button>
                          <button
                            type="button"
                            class="chat-toolbar-button"
                            data-command="image"
                            aria-label="Insertar imagen desde un archivo"
                          >
                            🖼️
                          </button>
                          <button type="button" class="chat-toolbar-button" data-command="attachment" aria-label="Adjuntar archivo">
                            📎
                          </button>
                        </div>
                        <div
                          id="general-chat-editor"
                          class="chat-editor-content"
                          contenteditable="true"
                          role="textbox"
                          aria-multiline="true"
                          data-placeholder="Comparte un aviso para todos los jugadores"
                        ></div>
                        <textarea id="general-chat-input" name="message" hidden></textarea>
                        <div id="general-chat-attachments" class="chat-attachments" hidden>
                          <p class="chat-attachments-title">Adjuntos</p>
                          <ul class="chat-attachments-list" aria-live="polite"></ul>
                        </div>
                        <input
                          type="file"
                          id="general-chat-attachment-input"
                          class="sr-only"
                          multiple
                          accept="image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                        />
                        <input
                          type="file"
                          id="general-chat-image-input"
                          class="sr-only"
                          accept="image/*"
                        />
                      </div>
                      <button type="submit" class="primary">Publicar aviso</button>
                    </form>
                  </article>
                </div>
            </section>

            <section id="section-rules" class="app-section" hidden>
              <article class="card">
                <div class="card-header">
                  <h3>Reglamento de la liga</h3>
                  <div class="card-actions">
                    <button
                      type="button"
                      class="secondary"
                      id="rules-edit-button"
                      data-admin-visible="toggle"
                      hidden
                    >
                      Editar reglamento
                    </button>
                  </div>
                </div>
                <div class="rules-content" id="rules-content"></div>
              </article>
            </section>

            <section id="section-notifications" class="app-section" hidden>
              <article class="card" id="notifications-card">
                <div class="card-header">
                  <div>
                    <h3>Notificaciones</h3>
                    <p class="card-subtitle">
                      Consulta y gestiona los avisos pendientes de la liga.
                    </p>
                  </div>
                  <span class="card-badge" id="metric-notifications" aria-live="polite" hidden>0</span>
                </div>
                <ul class="list" id="notifications-list"></ul>
              </article>
            </section>

            <section
              id="section-admin"
              class="app-section"
              data-admin-only="true"
              hidden
            >
              <article class="card" id="admin-overview-card">
                <div class="card-header">
                  <div>
                    <h3>Panel de administración</h3>
                    <p class="card-subtitle">
                      Accede a las herramientas de gestión para mantener la liga al día.
                    </p>
                  </div>
                  <span class="tag admin">Admin</span>
                </div>
                <div class="meta">
                  Selecciona una opción del menú de administración para comenzar.
                </div>
              </article>
            </section>

            <section
              id="section-user-directory"
              class="app-section"
              data-admin-only="true"
              hidden
            >
              <article class="card" id="user-directory-card">
                <div class="card-header">
                  <div>
                    <h3>Gestión de usuarios</h3>
                    <p class="card-subtitle">
                      Filtra y edita los perfiles de los miembros con acceso a la plataforma.
                    </p>
                  </div>
                  <div class="card-actions">
                    <button
                      type="button"
                      class="secondary"
                      id="player-create-button"
                      data-admin-only="true"
                      data-admin-visible="toggle"
                      hidden
                    >
                      Nuevo usuario
                    </button>
                    <span class="tag admin">Admin</span>
                  </div>
                </div>
                <div class="player-directory-summary">
                  Resultados: <strong id="user-directory-count">0</strong>
                </div>
                <div class="player-directory-controls">
                  <label class="inline-field">
                    Búsqueda
                    <input
                      type="search"
                      id="user-directory-search"
                      placeholder="Nombre, correo o teléfono"
                    />
                  </label>
                  <label class="inline-field">
                    Género
                    <select id="user-directory-gender">
                      <option value="">Todos</option>
                      <option value="masculino">Masculino</option>
                      <option value="femenino">Femenino</option>
                      <option value="mixto">Mixto</option>
                    </select>
                  </label>
                  <label class="inline-field">
                    Rol
                    <select id="user-directory-role">
                      <option value="">Todos</option>
                      <option value="player">Jugador</option>
                      <option value="admin">Administrador</option>
                      <option value="court_manager">Gestor de pistas</option>
                    </select>
                  </label>
                  <label class="inline-field">
                    Categoría
                    <select id="user-directory-category">
                      <option value="">Todas</option>
                    </select>
                  </label>
                </div>
                <ul class="list" id="user-directory-list"></ul>
                <div class="empty-state" id="user-directory-empty" hidden>
                  Aún no hay usuarios que coincidan con el filtro seleccionado.
                </div>
              </article>
            </section>
            <section
              id="section-demo-mode"
              class="app-section"
              data-admin-only="true"
              hidden
            >
              <article class="card" id="demo-mode-card">
                <div class="card-header">
                  <div>
                    <h3>Modo demo</h3>
                    <p class="card-subtitle">
                      Genera cuentas ficticias para mostrar la plataforma sin usar datos reales.
                    </p>
                  </div>
                  <div class="card-actions">
                    <button
                      type="button"
                      class="primary"
                      id="demo-mode-generate-button"
                      data-admin-only="true"
                      data-admin-visible="toggle"
                      hidden
                    >
                      Generar jugadores demo
                    </button>
                    <span class="tag admin">Admin</span>
                  </div>
                </div>
                <p>
                  Se crearán cuentas de jugadores profesionales con una contraseña compartida. Si las cuentas ya existen,
                  se conservarán sin modificaciones.
                </p>
                <p class="form-hint">
                  Puedes repetir la operación en cualquier momento para recuperar las cuentas demo que se hayan eliminado.
                </p>
                <p class="status-message" id="demo-mode-status"></p>
                <div class="demo-mode-results" id="demo-mode-results" hidden>
                  <p class="demo-mode-result-line" id="demo-mode-created"></p>
                  <p class="demo-mode-result-line" id="demo-mode-skipped"></p>
                  <p class="form-hint demo-mode-password" id="demo-mode-password" hidden></p>
                </div>
              </article>
            </section>
            <section
              id="section-court-admin"
              class="app-section"
              data-requires-court-manager="true"
              hidden
            >
              <div class="courts-grid courts-management-grid">
                <article class="card" id="court-calendar-card">
                  <div class="card-header">
                    <div>
                      <h3>Calendario de pistas</h3>
                      <p class="card-subtitle">
                        Visualiza partidos, reservas manuales y bloqueos especiales por mes.
                      </p>
                    </div>
                    <div class="calendar-actions">
                      <div
                        class="calendar-view-toggle"
                        role="group"
                        aria-label="Cambiar vista del calendario de pistas"
                      >
                        <button
                          type="button"
                          class="calendar-view-button"
                          data-court-calendar-view="day"
                          aria-pressed="false"
                        >
                          Día
                        </button>
                        <button
                          type="button"
                          class="calendar-view-button is-active"
                          data-court-calendar-view="month"
                          aria-pressed="true"
                        >
                          Mes
                        </button>
                      </div>
                      <div class="calendar-nav">
                        <button type="button" class="ghost" id="court-calendar-prev" aria-label="Periodo anterior">
                          ◀
                        </button>
                        <span class="calendar-label" id="court-calendar-label">Mes</span>
                        <button type="button" class="ghost" id="court-calendar-next" aria-label="Periodo siguiente">
                          ▶
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="calendar-container" id="court-calendar-container"></div>
                  <p class="status-message" id="court-calendar-status"></p>
                </article>

                <article class="card" id="court-block-card">
                  <div class="card-header">
                    <div>
                      <h3>Bloquear pistas</h3>
                      <p class="card-subtitle">
                        Reserva franjas horarias para partidos oficiales de liga o torneos.
                      </p>
                    </div>
                  </div>
                  <form id="court-block-form" class="form">
                    <div class="form-grid">
                    <label class="inline-field">
                      Contexto
                      <select id="court-block-context" name="contextType" required>
                        <option value="league">Liga</option>
                        <option value="tournament">Torneo</option>
                        <option value="lesson">Clases de tenis</option>
                      </select>
                    </label>
                      <label class="inline-field">
                        Competición
                        <select id="court-block-entity" name="contextId" required></select>
                      </label>
                    </div>
                    <div class="form-grid">
                      <label class="inline-field">
                        Inicio
                        <input type="datetime-local" id="court-block-start" name="startsAt" required />
                      </label>
                      <label class="inline-field">
                        Fin
                        <input type="datetime-local" id="court-block-end" name="endsAt" required />
                      </label>
                    </div>
                    <label class="inline-field">
                      Pistas incluidas
                      <select id="court-block-courts" name="courts" multiple></select>
                      <span class="form-hint"
                        >Deja vacío para aplicar el bloqueo a todas las pistas configuradas.</span
                      >
                    </label>
                    <label class="inline-field">
                      Notas internas
                      <textarea id="court-block-notes" name="notes" rows="2" maxlength="500"></textarea>
                    </label>
                    <div class="form-actions">
                      <button type="submit" class="primary">Guardar bloqueo</button>
                    </div>
                  </form>
                  <p class="status-message" id="court-block-status"></p>
                  <h4>Bloqueos del periodo</h4>
                  <ul class="list" id="court-blocks-list">
                    <li class="empty-state" id="court-blocks-empty">
                      No hay bloqueos registrados para el mes seleccionado.
                    </li>
                  </ul>
                </article>

              </div>
            </section>
            <section id="section-account" class="app-section" hidden>
              <article class="card" id="account-dashboard-card">
                <div class="card-header">
                  <div>
                    <h3>Resumen de actividad</h3>
                    <p class="card-subtitle">
                      Consulta tus inscripciones, partidos programados y pagos registrados en un solo lugar.
                    </p>
                  </div>
                  <div class="card-actions">
                    <button type="button" class="ghost" id="account-dashboard-refresh">Actualizar</button>
                  </div>
                </div>
                <div class="account-dashboard" id="account-dashboard" hidden>
                  <div class="account-dashboard__metrics">
                    <div class="metric-card">
                      <span class="metric-label">Inscripciones activas</span>
                      <strong id="account-enrollments-count">0</strong>
                    </div>
                    <div class="metric-card">
                      <span class="metric-label">Partidos programados</span>
                      <strong id="account-upcoming-count">0</strong>
                    </div>
                    <div class="metric-card">
                      <span class="metric-label">Resultados recientes</span>
                      <strong id="account-recent-count">0</strong>
                    </div>
                    <div class="metric-card">
                      <span class="metric-label">Pagos registrados</span>
                      <strong id="account-payments-count">0</strong>
                    </div>
                  </div>
                  <div class="account-dashboard__totals">
                    <div class="account-dashboard__total">
                      <span>Pagado</span>
                      <strong id="account-payments-paid">0,00&nbsp;EUR</strong>
                    </div>
                    <div class="account-dashboard__total">
                      <span>Pendiente</span>
                      <strong id="account-payments-pending">0,00&nbsp;EUR</strong>
                    </div>
                    <div class="account-dashboard__total">
                      <span>Total registrado</span>
                      <strong id="account-payments-total">0,00&nbsp;EUR</strong>
                    </div>
                  </div>
                  <div class="account-dashboard__sections">
                    <div class="account-dashboard__column">
                      <section class="account-dashboard__section">
                        <h4>Inscripciones</h4>
                        <ul class="list" id="account-enrollments-list" hidden></ul>
                        <p class="empty-state" id="account-enrollments-empty">
                          Todavía no te has inscrito en ninguna liga.
                        </p>
                      </section>
                      <section class="account-dashboard__section">
                        <h4>Próximos partidos</h4>
                        <ul class="list" id="account-upcoming-list" hidden></ul>
                        <p class="empty-state" id="account-upcoming-empty">No tienes partidos programados.</p>
                      </section>
                    </div>
                    <div class="account-dashboard__column">
                      <section class="account-dashboard__section">
                        <h4>Resultados recientes</h4>
                        <ul class="list" id="account-recent-list" hidden></ul>
                        <p class="empty-state" id="account-recent-empty">No hay resultados recientes.</p>
                      </section>
                      <section class="account-dashboard__section">
                        <h4>Pagos registrados</h4>
                        <ul class="list" id="account-payments-list" hidden></ul>
                        <p class="empty-state" id="account-payments-empty">Todavía no has registrado pagos.</p>
                      </section>
                    </div>
                  </div>
                </div>
                <div class="empty-state" id="account-dashboard-empty" hidden>
                  Tus inscripciones, partidos y pagos aparecerán aquí en cuanto participes en la liga.
                </div>
                <p class="status-message" id="account-dashboard-status"></p>
              </article>
              <div class="account-section__columns">
                <article class="card">
                  <div class="card-header">
                    <div>
                      <h3>Mi cuenta</h3>
                      <p class="card-subtitle">Consulta tus datos y edítalos cuando lo necesites.</p>
                    </div>
                    <button id="profile-edit" type="button" class="secondary">Editar datos</button>
                  </div>
                  <div class="account-wrapper">
                    <div class="account-overview" id="account-overview">
                      <div class="account-photo" id="account-photo" aria-hidden="true"></div>
                      <dl class="account-list">
                        <div>
                          <dt>Nombre completo</dt>
                          <dd id="account-full-name"></dd>
                        </div>
                        <div>
                          <dt>Correo electrónico</dt>
                          <dd id="account-email"></dd>
                        </div>
                        <div>
                          <dt>Teléfono</dt>
                          <dd id="account-phone"></dd>
                        </div>
                        <div>
                          <dt>Socio del club</dt>
                          <dd id="account-membership"></dd>
                        </div>
                        <div id="account-membership-number-row" hidden>
                          <dt>Nº de socio</dt>
                          <dd id="account-membership-number"></dd>
                        </div>
                        <div>
                          <dt>Talla de camiseta</dt>
                          <dd id="account-shirt-size"></dd>
                        </div>
                        <div>
                          <dt>Fecha de nacimiento</dt>
                          <dd id="account-birth-date"></dd>
                        </div>
                        <div>
                          <dt>Horario preferido</dt>
                          <dd id="account-schedule"></dd>
                        </div>
                        <div>
                          <dt>Notas</dt>
                          <dd id="account-notes"></dd>
                        </div>
                        <div>
                          <dt>Notificaciones push</dt>
                          <dd id="account-push-status">Sin configurar</dd>
                        </div>
                      </dl>
                    </div>
                    <form id="profile-form" class="form profile-form" hidden>
                      <div class="form-grid">
                        <label>
                          Nombre completo
                          <input type="text" name="fullName" minlength="3" required />
                        </label>
                        <label>
                          Correo electrónico
                          <input type="email" name="email" required />
                        </label>
                      </div>
                      <div class="form-grid">
                        <label>
                          Teléfono de contacto
                          <input type="tel" name="phone" minlength="7" required />
                        </label>
                        <label>
                          Horario preferido
                          <select name="preferredSchedule" required>
                            <option value="manana">Mañana</option>
                            <option value="tarde">Tarde</option>
                            <option value="noche">Noche</option>
                            <option value="fin_de_semana">Fin de semana</option>
                            <option value="flexible">Flexible</option>
                          </select>
                        </label>
                      </div>
                      <label>
                        Talla de camiseta
                        <select name="shirtSize" required>
                          <option value="">Selecciona</option>
                          <option value="XS">XS</option>
                          <option value="S">S</option>
                          <option value="M">M</option>
                          <option value="L">L</option>
                          <option value="XL">XL</option>
                          <option value="XXL">XXL</option>
                        </select>
                      </label>
                      <div class="form-grid">
                        <label>
                          Género
                          <select name="gender" required>
                            <option value="masculino">Masculino</option>
                            <option value="femenino">Femenino</option>
                            <option value="mixto">Mixto</option>
                          </select>
                        </label>
                        <label>
                          Fecha de nacimiento
                          <input type="date" name="birthDate" required />
                        </label>
                      </div>
                      <div class="form-grid">
                        <label class="checkbox-option checkbox-option--stacked">
                          <input type="checkbox" name="isMember" id="profile-is-member" value="true" />
                          Soy socio del club
                          <span class="form-hint">Marca esta opción si dispones de número de socio.</span>
                        </label>
                        <label id="profile-membership-wrapper" hidden>
                          Nº de socio
                          <input type="text" name="membershipNumber" id="profile-membership-number" maxlength="50" />
                          <span class="form-hint">Introduce el número asignado por el club.</span>
                        </label>
                      </div>
                      <label>
                        Fotografía
                        <input type="file" name="photo" accept="image/*" />
                        <span class="form-hint">La imagen se guarda en Base64 con un límite de 2&nbsp;MB.</span>
                      </label>
                      <label>
                        Notas
                        <textarea name="notes" rows="2" maxlength="500" placeholder="Preferencias adicionales"></textarea>
                      </label>
                      <div class="form-grid form-grid--stacked">
                        <label class="checkbox-option">
                          <input type="checkbox" name="notifyMatchRequests" value="true" />
                          Avisarme cuando reciba solicitudes de partido
                        </label>
                        <label class="checkbox-option">
                          <input type="checkbox" name="notifyMatchResults" value="true" />
                          Notificarme cuando se confirme un resultado
                        </label>
                      </div>
                      <label>
                        Actualizar contraseña (opcional)
                        <input type="password" name="password" minlength="8" placeholder="Deja vacío para mantener la actual" />
                      </label>
                      <div class="form-actions">
                        <button type="submit" class="primary">Guardar cambios</button>
                        <button type="button" id="profile-cancel" class="ghost">Cancelar</button>
                      </div>
                    </form>
                  </div>
                  <p class="status-message" id="profile-status"></p>
                </article>
                <article class="card" id="push-settings-card">
                  <div class="card-header">
                    <h3>Notificaciones push</h3>
                  </div>
                  <p class="card-subtitle" id="push-status-text">
                    Activa las notificaciones push para recibir avisos inmediatos en este dispositivo.
                  </p>
                  <div class="card-actions">
                    <button type="button" class="primary" id="push-enable-button">Activar notificaciones</button>
                    <button type="button" class="ghost" id="push-disable-button" hidden>
                      Desactivar notificaciones
                    </button>
                  </div>
                  <p class="form-hint" id="push-permission-warning" hidden>
                    Has bloqueado las notificaciones en el navegador. Reactívalas desde la configuración del sitio
                    para volver a habilitarlas.
                  </p>
                  <p class="form-hint" id="push-unsupported-warning" hidden>
                    Tu navegador no es compatible con las notificaciones push. Prueba en un dispositivo o navegador
                    actualizado.
                  </p>
                </article>
              </div>
            </section>
          </div>
        </div>
      </section>
    </main>

    <div id="modal-overlay" class="modal-overlay" hidden>
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-header">
          <h2 id="modal-title"></h2>
          <button type="button" class="ghost icon-only" id="modal-close" aria-label="Cerrar diálogo">
            ×
          </button>
        </div>
        <div class="modal-body" id="modal-body"></div>
      </div>
    </div>

    <script type="module" src="/app/app.js"></script>
  </body>
</html>
